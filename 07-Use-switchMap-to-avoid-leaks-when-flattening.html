<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
</head>
<body>
  <div id="foo"></div>
	<script src="https://unpkg.com/rxjs@5.4.3/bundles/Rx.min.js"></script>
	<script>
        const click$ = Rx.Observable
            .fromEvent(document, 'click');
        
        // const tickWhenClick$ = click$
        //     .flatMap(ev => Rx.Observable.interval(500));

        // switchMap cancels the previous observable
        // so we don't end up with a bunch of observables running simultaneously
        // as with flatMap
        const tickWhenClick$ = click$
            .switchMap(ev => Rx.Observable.interval(500));

        tickWhenClick$.subscribe(function (x) {
            console.log(x) 
        });
    </script>
</body>
</html>